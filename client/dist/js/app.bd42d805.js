(function(e){function t(t){for(var a,i,r=t[0],l=t[1],c=t[2],d=0,f=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&f.push(s[i][0]),s[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(f.length)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,r=1;r<n.length;r++){var l=n[r];0!==s[l]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},s={app:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.visible?n("div",{staticClass:"reg"},[n("b-tabs",{staticClass:"tabwrap",attrs:{"content-class":"mt-3"}},[n("b-tab",{attrs:{title:"Добавить документ",active:""}},[n("form",{staticClass:"form",attrs:{name:"upload",action:"/check",method:"POST",enctype:"multipart/form-data"}},[n("div",{staticClass:"line"},[n("label",{attrs:{for:"tel2"}},[e._v("Второй проверяющий")]),n("b-form-input",{attrs:{name:"tel2",type:"text",id:"tel2"},model:{value:e.tel2,callback:function(t){e.tel2=t},expression:"tel2"}})],1),n("div",{staticClass:"line"},[n("label",{attrs:{for:"tel3"}},[e._v("Третий проверяющий")]),n("b-form-input",{attrs:{name:"tel3",type:"text",id:"tel3"},model:{value:e.tel3,callback:function(t){e.tel3=t},expression:"tel3"}})],1),n("div",{staticClass:"line"},[n("div",[n("label",{attrs:{for:"date"}},[e._v("Дата")]),n("b-form-input",{attrs:{name:"date",type:"date",id:"date"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),n("div",[n("label",{attrs:{for:"expire"}},[e._v("Срок (мес.)")]),n("b-form-input",{attrs:{name:"expire",type:"number",id:"expire",value:"1",min:"1",max:"12"},model:{value:e.expire,callback:function(t){e.expire=t},expression:"expire"}})],1)]),n("div",{staticClass:"line"},[n("b-col",{attrs:{sm:"7",id:"fileInput"}},[n("b-form-file",{attrs:{id:"file",name:"file",state:Boolean(e.file),placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1),n("b-button",{attrs:{disabled:e.disabled},on:{click:e.sign}},[e._v(e._s(e.buttonText))])],1)])]),n("b-tab",{attrs:{title:"Войти по номеру"}},[n("form",{staticClass:"form",attrs:{name:"login",method:"POST",enctype:"multipart/form-data"}},[n("div",{staticClass:"line"},[n("label",{attrs:{for:"telephone"}},[e._v("Телефон")]),n("b-form-input",{attrs:{name:"telNumber",id:"telephone",placeholder:"Введите номер телефона"},model:{value:e.telNumber,callback:function(t){e.telNumber=t},expression:"telNumber"}})],1),n("div",{staticClass:"buttonwrap"},[n("b-button",{attrs:{variant:"success"},on:{click:e.login}},[e._v("Вход")])],1)])])],1)],1):e._e(),n("router-view")],1)},o=[],i=(n("f9e3"),n("2dd8"),{data:function(){return{telNumber:"",file:"",visible:!0,tel2:"",tel3:"",date:"",expire:"",buttonText:"Документ проверен",disabled:!1}},methods:{login:function(){if(this.telNumber){this.visible=!this.visible;var e=new FormData(document.forms.login);this.$router.push({name:"check",params:{telNumber:this.telNumber,formData:e}})}else alert("Введите номер телефона")},sign:function(){if(this.tel2&&this.tel3&&this.file&&this.date&&this.expire)if(this.tel2==this.tel3)alert("Проверяющие должны быть разные");else{"Подписи проверены"==this.buttonText&&(this.$socket.send("Подписи проверены"),this.file="",this.tel2="",this.tel3="",this.expire="",this.date="",this.buttonText="Поставить подпись",this.disabled=!1);var e=new FormData(document.forms.upload),t=new XMLHttpRequest;t.open("POST","/",!0),t.send(e),this.buttonText="Ожидаем проверки...",this.disabled=!0,t.onreadystatechange=function(){4==t.readyState&&(200!=t.status?alert(t.status+": "+t.statusText):console.log("asd"+t.responseText))}}else alert("Заполните поля")}},created:function(){this.$options.sockets.onmessage=function(e){console.log(e),"Документ проверен"==e.data&&(console.log("Документ проверен,можно проверять подписи"),this.buttonText="Подписи проверены",this.disabled=!1)}}}),r=i,l=(n("034f"),n("2877")),c=Object(l["a"])(r,s,o,!1,null,null,null),u=c.exports,d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mainwrapper"},[n("div",{staticClass:"menuline"},[n("span",[e._v("Ваш номер телефона:")]),n("p",[e._v(e._s(e.telNumber))])]),n("div",{staticClass:"menuline"},[n("span",[e._v("Имя файла:")]),n("p",[e._v(e._s(e.fileName))]),n("b-button",{on:{click:e.download}},[e._v("Загрузить файл")]),e.isDocToCheck?n("div",[n("span",[e._v("Поставьте подпись:")]),n("VueSignaturePad",{ref:"signaturePad",attrs:{id:"signature",width:"200px",height:"200px",options:{onBegin:e.onBegin,onEnd:e.onEnd}}})],1):e._e(),e.docChecked?n("b-button",{attrs:{variant:"success",disabled:""}},[e._v("Документ проверен")]):e._e(),e.signsChecked?n("b-button",{attrs:{variant:"warning",disabled:""}},[e._v("Подписи проверены")]):e._e()],1)])},f=[],p={data:function(){return{telNumber:"",fileName:"",date:"",file:{},isDocToCheck:!1,docChecked:!1,signsChecked:!1}},methods:{onEnd:function(){console.log("=== End ==="),this.docChecked=!0,this.$socket.sendObj({telNumber:this.telNumber}),this.$refs.signaturePad.lockSignaturePad()},download:function(){var e=new XMLHttpRequest;e.open("GET","/download",!0),e.send(this.fileName)}},computed:{},created:function(){var e=this;this.telNumber=this.$route.params.telNumber,this.$options.sockets.onmessage=function(e){console.log(e),"Подписи проверены"==e.data&&(this.docChecked=!1,this.signsChecked=!0)};var t=function t(){var n=new XMLHttpRequest;n.open("POST","/check",!0),n.send(e.$route.params.formData),n.responseType="json",n.onreadystatechange=function(){4==n.readyState&&(200!=n.status?alert(n.status+": "+n.statusText):n.response.isDocToCheck?(console.log("нет такого",n.response),e.fileName="Файлов для проверки нет",e.isDocToCheck=!1,setTimeout(t,3e3)):(e.fileName=n.response.fileName,console.log("все ок",n.response.fileName),e.isDocToCheck=!0))}};t()}},b=p,h=(n("aee4"),Object(l["a"])(b,d,f,!1,null,null,null)),m=h.exports,v=n("8c4f"),g=n("5f5b"),x=n("b1e0"),k=n("2169"),_=n("b408"),y=n.n(_);a["default"].use(y.a,"ws://localhost:8080",{format:"json"}),a["default"].use(k["a"]),a["default"].use(g["a"]),a["default"].use(x["a"]),a["default"].use(v["a"]),a["default"].config.devtools=!0,a["default"].config.productionTip=!1;var w=[{path:"/check",name:"check",component:m}],C=new v["a"]({routes:w,mode:"history"});new a["default"]({router:C,render:function(e){return e(u)}}).$mount("#app")},5842:function(e,t,n){},"85ec":function(e,t,n){},aee4:function(e,t,n){"use strict";n("5842")}});
//# sourceMappingURL=app.bd42d805.js.map